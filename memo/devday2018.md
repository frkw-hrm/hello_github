# aws dev day 2018

* スーツ組は一割以下

* 150名程度入りそうなホールで七割ぐらい？

* 結構空きがあったので当日入場できそう

* 無料LAN＋机＋電源完備で内職にもってこい

## セキュア開発プロセス

* EGセキュアソリューションの代表

* 安全な web アプリケーションの作り方 → アジャイルには重い

* 脆弱性テストはできたものからやりたい＋自動化

* イテレーション外でやれることはやっておく

* セキュリティ担当者の育成が必要かも。。。

* 脅威分析もインクリメンタルに

* 機能実装と共に評価 + 公開前に専門家による診断

* できる限りフレームワークで対処

* OpenVAS, NAVAS?, OWASP ZAP, ソースコード診断ツール（高い + 誤検知多い）

* セキュリティTDD

* OWASP ZAP CLI

* 実行は最適なタイミングを選べばよい

* ツールだけでは十分ではない。やっぱり専門家に見てもらったほうが良い。

## ドメインモデリング

* DDD おじさん

### ドメインモデル発見

* ドメインモデルを見つけるには俯瞰が必要でハードルが高い

* RDRA リレーションシップ要件駆動分析

* ユーザストーリーマッピング

* 図として残すには RDRA もあり

* 知識のかみ砕きでドメインモデルを発見する

### ドメインモデル作成

* ドメイン層への浸食を防ぐため、ドメインを隔離

* ドメイン知識の実態は基本データの判断・加工・計算ロジック

* 操作だけを公開するべき

* getter/setter の羅列ではドメイン知識を凝集できない

* ICONIX

* ユースケース　→　シーケンス を実現するためロバストネス分析

* ユースケース記述を BCE に分類

* CRUD 以外のコントロールがドメインに

* Event Storming : 集約を見つける

### ドメインオブジェクトを育てる

* 設計を予測可能にする、設計の凝集性を高める

* 副作用のない関数パターン：演算して set するのはよくない + 副作用を持つのもよくない

* 閉じた操作 : 戻り値を引数と同じに

## 外部に依存したコードもテストで駆動

* さすがにほぼ満席

* 能天気な正常系　→ happy path

* 小さく直交性の高いものが使いやすい

* レガシーコードのジレンマ

* seam を利用

* テストのためにコードを修正

* いったんスキップ

* green -> リファクタリングが重要

* モックライブラリが高機能化したので、設計の見直しをしなくなった

* テストは品質をあげない。プログラミング。

* ロジックをモデルに押し込めて、テスト容易に

* 依存性への接地面を減らす

* アーキテクチャレベルの修正へ

* データと情報

* データをできる限り格納しておくことで変更に強くなる

* TDD はひらめきを具現化するための備え

## PWA

* SPA を廃止

* PWA : Fast Reliable Engaging

* PRPL : Push Render Pre-cache Lazyload

* Http/2 Server push -> H2O Fastly(CDN)

* Render -> Critical css 人手

* 画面表示の後に js 実行。SPA じゃないから。async/defer で

* Pre-cache -> service worker(js) キャッシュ制御

* いろいろできるけどバグにもつながる。泥臭い実装が必要。

* prefetch preconnect prerender

* lazyload -> dom の大きさ、深さを制御

* performance monitoring して slack 通知

* Background Sync : オフラインの履歴をオンラインで再送

* service worker : 自前　→　workbox